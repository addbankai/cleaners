"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[586],{35695:(e,a,l)=>{var n=l(18999);l.o(n,"useRouter")&&l.d(a,{useRouter:function(){return n.useRouter}})},35839:(e,a,l)=>{l.a(e,async(e,n)=>{try{l.d(a,{WalletProvider:()=>d,v:()=>u});var t=l(95155),s=l(12115),o=l(40014),c=e([o]);o=(c.then?(await c)():c)[0];let r="connectedWalletName",i=(0,s.createContext)(void 0),d=e=>{let{children:a}=e,[l,n]=(0,s.useState)(null),[c,d]=(0,s.useState)(null),[u,h]=(0,s.useState)(null),[m,b]=(0,s.useState)(!1),[g,v]=(0,s.useState)(!0),[f,x]=(0,s.useState)(null),[N,w]=(0,s.useState)([]),[j,p]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{v(!0),x(null);try{let e="mainnetVbjVldxKBO4c6U4z5IB6s7hivqfNQ9n7";if(!e)throw Error("NEXT_PUBLIC_BLOCKFROST_API_KEY not set.");let a=await o.yN.new(new o.OC("https://cardano-mainnet.blockfrost.io/api/v0",e),"Mainnet");n(a);let l=[];window.cardano&&Object.keys(window.cardano).forEach(e=>{var a,n;window.cardano&&"function"==typeof(null===(a=window.cardano[e])||void 0===a?void 0:a.enable)&&(null===(n=window.cardano[e])||void 0===n?void 0:n.apiVersion)&&l.push(e)}),w(l),console.log("Available wallets:",l);let t=localStorage.getItem(r);t&&l.includes(t)?(console.log("Found last connected wallet in storage: ".concat(t)),p(t)):(p(null),localStorage.removeItem(r))}catch(e){console.error("Initialization error:",e),x("Failed to initialize connection. Please refresh."),localStorage.removeItem(r)}finally{v(!1)}})()},[]);let S=(0,s.useCallback)(async e=>{var a;if(!l||!(null===(a=window.cardano)||void 0===a?void 0:a[e]))return x("Lucid not initialized or wallet '".concat(e,"' not found.")),Promise.reject(Error("Wallet '".concat(e,"' not found.")));v(!0),x(null);try{let a=window.cardano[e];if(!a||"function"!=typeof a.enable)throw Error("Wallet API or enable function for '".concat(e,"' not found."));let n=await a.enable();l.selectWallet(n);let t=await l.wallet.address();d(n),h(t),b(!0),p(e),localStorage.setItem(r,e),console.log("Connected to ".concat(e,", Address: ").concat(t))}catch(l){console.error("Failed to connect to ".concat(e,":"),l);let a=l instanceof Error?l.message:String(l);throw x("Failed to connect wallet: ".concat(a)),b(!1),d(null),h(null),p(null),localStorage.removeItem(r),l}finally{v(!1)}},[l]),k=(0,s.useCallback)(()=>{d(null),h(null),b(!1),p(null),localStorage.removeItem(r),console.log("Wallet disconnected.")},[]);return(0,t.jsx)(i.Provider,{value:{lucid:l,walletApi:c,address:u,isConnected:m,isLoading:g,error:f,availableWallets:N,lastConnectedWallet:j,connectWallet:S,disconnectWallet:k},children:a})},u=()=>{let e=(0,s.useContext)(i);if(void 0===e)throw Error("useWallet must be used within a WalletProvider");return e};n()}catch(e){n(e)}})},85586:(e,a,l)=>{l.a(e,async(e,n)=>{try{l.r(a),l.d(a,{default:()=>i});var t=l(95155),s=l(12115),o=l(35839),c=l(35695),r=e([o]);function i(){let{lucid:e,isConnected:a,isLoading:l,address:n,error:r,disconnectWallet:i}=(0,o.v)(),d=(0,c.useRouter)(),[u,h]=(0,s.useState)(null),[m,b]=(0,s.useState)(null);console.log("DashboardClientPage Render - isConnected:",a,"address:",n,"isLoading:",l);let g="279c909f348e533da5808898f87f9a14bb2c3dfbbacccd631d927a3f534e454b";return((0,s.useEffect)(()=>{(async()=>{if(!a||!e||!n){h(null),b(null);return}h(null),b(null);try{console.log("Fetching UTXOs for balance...");let a=await e.wallet.getUtxos();if(!Array.isArray(a))throw Error("Failed to fetch valid UTXOs. Received non-array.");console.log("Found ".concat(a.length," UTXOs. Processing balances..."));let l=BigInt(0),n=BigInt(0);a.forEach(e=>{var a;l+=null!==(a=e.assets.lovelace)&&void 0!==a?a:BigInt(0);let t=e.assets[g];"bigint"==typeof t&&(n+=t)}),console.log("Total Lovelace:",l.toString()),console.log("Total Snek:",n.toString()),h(l),b(n)}catch(e){console.error("Error fetching wallet balance data:",e),h(null),b(null)}finally{}})()},[a,e,n,g]),(0,s.useEffect)(()=>{l||a||(console.log("DashboardClientPage: Not connected, redirecting to home..."),d.push("/"))},[l,a,d]),l)?(0,t.jsx)("div",{className:"dashboard-container disconnected-state",children:(0,t.jsx)("p",{children:"Loading wallet status..."})}):r?(0,t.jsx)("div",{className:"dashboard-container disconnected-state",children:(0,t.jsxs)("p",{className:"wallet-error",children:["Error initializing wallet connection: ",r]})}):a?(0,t.jsxs)("div",{className:"gaming-dashboard",children:[(0,t.jsxs)("div",{className:"dashboard-header",children:[(0,t.jsx)("p",{className:"header-subtitle",children:"SLITHERMONS USER DASHBOARD"}),(0,t.jsx)("h1",{children:"string"!=typeof n||0===n.length?"User Dashboard":n.length<=14?n:"".concat(n.substring(0,8),"...").concat(n.substring(n.length-6))}),(0,t.jsx)("button",{onClick:i,className:"logout-button",style:{marginLeft:"1rem",padding:"0.5rem 1rem",cursor:"pointer"},children:"Logout"})," "]}),(0,t.jsxs)("div",{className:"dashboard-main-content",children:[(0,t.jsxs)("div",{className:"stats-section",children:[(0,t.jsxs)("div",{className:"stat-box",children:[(0,t.jsx)("span",{className:"stat-label",children:"LEVEL"}),(0,t.jsx)("span",{className:"stat-value",children:"0"})]}),(0,t.jsxs)("div",{className:"stat-box",children:[(0,t.jsx)("span",{className:"stat-label",children:"EXP"}),(0,t.jsxs)("span",{className:"stat-value",children:["0",(0,t.jsx)("span",{className:"stat-value-suffix",children:"/???"})]})]}),(0,t.jsxs)("div",{className:"stat-box",children:[(0,t.jsx)("span",{className:"stat-label",children:"ENERGY"}),(0,t.jsx)("span",{className:"stat-value",children:"0"})]})]}),(0,t.jsxs)("div",{className:"tokens-section",children:[(0,t.jsxs)("div",{className:"token-box",children:[(0,t.jsx)("span",{className:"token-label",children:"Token 1 (ADA)"}),(0,t.jsx)("span",{className:"token-balance",children:(null!==u?Number(u)/1e6:0).toLocaleString()})]}),(0,t.jsxs)("div",{className:"token-box",children:[(0,t.jsx)("span",{className:"token-label",children:"Token 2 (Snek)"}),(0,t.jsx)("span",{className:"token-balance",children:(null!==m?Number(m):0).toLocaleString()})]}),(0,t.jsxs)("div",{className:"token-box",children:[(0,t.jsx)("span",{className:"token-label",children:"Token 3"}),(0,t.jsx)("span",{className:"token-balance",children:"--"})]})]})]})]}):(0,t.jsx)("div",{className:"dashboard-container disconnected-state",children:(0,t.jsx)("p",{children:"Redirecting..."})})}o=(r.then?(await r)():r)[0],n()}catch(e){n(e)}})}}]);